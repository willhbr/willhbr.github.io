defaults:
  build: website
  run: website
  update: website

images:
  website:
    tag: willhbr.github.io:latest
    from: Containerfile

development:
  website:
    name: willhbr.github.io
    bind_mounts:
      ~/Sync/Drafts: /src/_drafts
    image: :website
    ports:
      4000: 80
    autoremove: true
    labels:
      endash.links:
        - name: Website
          port: 80
    flags:
      config: _config.yml,_local.yml
    args:
      - --future
      - --draft
      - --strict_front_matter

  prod:
    name: willhbr.github.io-prod
    image: :website
    bind_mounts:
      .: /src
    ports:
      0: 80
    interactive: true
    autoremove: true
    labels:
      endash.links:
        - name: Website
          port: 80
    environment:
      JEKYLL_ENV: production
    flags:
      config: _config.yml
      host: 0
      port: 80
    args:
      - --strict_front_matter
